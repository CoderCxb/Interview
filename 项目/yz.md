###### 1. 项目开发的整个流程
需求评审 -> 设计稿评审 -> 技术方案评审 -> 初步开发 -> 测试用例评审 -> 继续开发 -> 冒烟 -> 提测 -> 产品设计一轮验收 -> 产品设计二轮验收 -> 发布上线 -> 线上验证

开发包含自测和联调

蓝绿发布: 在生产环境稳定集群之外, 额外部署一个规模相同的新集群,通过流量控制,当流量100%切至新集群后, 保持新老集群同时在线一段时间。
若期间发生任何异常,可立刻切回老集群,实现快速回滚。
若全部验证成功,则下线老集群, 新集群成为线上稳定集群。


灰度发布: 在生产环境稳定集群之外，额外部署一个小规模的灰度集群，并通过流量控制，引入部分流量到灰度集群，进行生产全量发布前的灰度验证。
若期间发生任何异常, 立刻切流回老集群。
若灰度验证成功则进行全量上线。

优势: 资源消耗较小, 回滚速度也较快
问题: 灰度并不能发现所有问题,全量上线之后的滚动回滚时间也较长

为什么使用蓝绿发布? 
 - 发布至线上环境后,若发现故障,蓝绿发布能够保持老集群在线,避免重新启动服务,可以快速回滚
 - 灰度发布能够发现的问题有限, 有些问题在全量时才会出现,如数据库查询慢、ES服务阻塞等

蓝绿发布的问题:
 - 既要部署同等规模的新集群,发布上线后还需要维持新老集群同时在线一段时间,因此所消耗的资源远远大于灰度发布

扩展:
滚动发布: 在生产环境稳定集群中, 不断的更新集群,直至集群全部更新完成。
若期间发生任何异常,需要撤销更新集群的操作。
若验证成功, 则成为稳定集群。

优势: 过渡平滑, 并且较于蓝绿发布, 资源消耗更小
问题: 回滚时间长, 回滚难度大,并且直接影响线上环境


###### 2. 项目发布的流程 
在预发环境测试无误后, 提MR合并到master -> 发布分支到基础预发 -> 提交发布单(蓝绿发布) -> 推流 -> 发布上线

###### 3. 组件库发版的流程
开发组件库 -> make release-beta会将beta的tag推送远程, CI中beta的tag会触发publish -> 在项目中更新组件库并验证 -> 验证通过选择发布方式

独立发布: 填写独立发布表格,执行make release将正式版本的tag推送到远程,提交MR,master的合并操作会触发CI中的publish,将组件库发布至npm

快车发布: 登记上车,司机先发布beta版进行验证(避免合并冲突导致的代码问题,因此不能直接发正式版),验证通过后,发布正式版

beta: 体验版
正式版:  正式版

npm link
依赖: npm link
项目: npm link module-name

###### 4. 组件文档自动构建


###### 5. 快车
快车本质上是一个集合了git操作并且登记项目发布信息的平台

周五生成快车分支, 下周二统一上车并进行自测, 周三测试进行验收, 周四发至基础预发再进行测试, 验证通过后合MR并发布



###### 6. 

###### 7. 技术方案
目的: 
  - 明确代码的实现思路,避免边想边写的编码方式,有助于同组成员进行可行性和影响面的评估
  - 有助于协作人员和后续开发人员更快的了解本项目做的事

具体实现:
  - 代码实现思路
  - 复用逻辑抽离
  - 确定所依赖组件库/项目是否改动



###### 8. 